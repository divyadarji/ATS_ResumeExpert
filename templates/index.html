<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Expert | AI-Powered Resume Analysis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/style.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <i class="fas fa-file-alt me-2"></i>
                <span class="navbar-brand-text">Resume Expert</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#features">Features</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section text-center text-light">
        <div class="container-fluid">
            <h1 class="mb-3">Resume Expert</h1>
            <p class="lead mb-4">Your AI-powered solution for resume analysis, matching, and actionable insights.</p>
            <a href="#upload-section" class="btn btn-lg btn-primary">Get Started</a>
        </div>
    </section>

    <!-- Main Content -->
    <main class="py-4">
        <div class="container-fluid">
            <div class="row g-4 align-items-stretch">
                <!-- Upload Section -->
                <div class="col-lg-5">
                    <section id="upload-section" class="card h-100">
                        <div class="card-body">
                            <h2><i class="fas fa-upload me-2"></i>Analyze Resumes</h2>
                            <form id="resumeForm" enctype="multipart/form-data">
                                <div class="mb-3">
                                    <label for="jobRole" class="form-label">Job Role</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="jobRole" placeholder="e.g., Node.js Developer with 2 years of exp">
                                        <button type="button" class="btn btn-info" id="generateJD">
                                            <i class="fas fa-magic me-1"></i>Generate JD
                                        </button>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="jobDescription" class="form-label">Job Description</label>
                                    <textarea class="form-control" id="jobDescription" name="job_description" rows="3"
                                              placeholder="Enter or generate a job description..."></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Upload Resumes</label>
                                    <div id="dropzone" class="dropzone">
                                        <p id="dropzone-text">Drag & drop files (PDF, DOCX, TXT, PNG, JPG, JPEG)</p>
                                        <input type="file" id="resumes" name="resumes" accept=".pdf,.docx,.txt,.png,.jpg,.jpeg" multiple style="display: none;">
                                    </div>
                                    <small id="file-count" class="text-muted d-block mt-2"></small>
                                    <div id="file-list" class="mt-3"></div>
                                </div>

                                <div class="text-center mt-3">
                                    <button type="button" class="btn btn-primary me-2" id="summarizeButton">
                                        <i class="fas fa-list-alt me-1"></i>Summarize
                                    </button>
                                    <button type="button" class="btn btn-secondary" id="matchButton">
                                        <i class="fas fa-percentage me-1"></i>Match
                                    </button>
                                </div>

                                <div class="mt-4 p-3 bg-white rounded shadow-sm">
                                    <h4><i class="fas fa-download me-2"></i>Categories & Percentage to Download</h4>
                                    <div class="row g-2 mb-3">
                                        <div class="col-md-6">
                                            <h5 class="mb-2">Select Categories</h5>
                                            <div id="categoryCheckboxes" class="form-check p-2 bg-light rounded">
                                                <div class="row row-cols-2 row-cols-md-3 g-2">
                                                    <div class="col"><div class="form-check"><input type="checkbox" class="form-check-input category-checkbox" id="checkFrontend" value="Frontend"><label class="form-check-label" for="checkFrontend">Frontend</label></div></div>
                                                    <div class="col"><div class="form-check"><input type="checkbox" class="form-check-input category-checkbox" id="checkBackend" value="Backend"><label class="form-check-label" for="checkBackend">Backend</label></div></div>
                                                    <div class="col"><div class="form-check"><input type="checkbox" class="form-check-input category-checkbox" id="checkFullStack" value="Full Stack"><label class="form-check-label" for="checkFullStack">Full Stack</label></div></div>
                                                    <div class="col"><div class="form-check"><input type="checkbox" class="form-check-input category-checkbox" id="checkMobile" value="Mobile"><label class="form-check-label" for="checkMobile">Mobile</label></div></div>
                                                    <div class="col"><div class="form-check"><input type="checkbox" class="form-check-input category-checkbox" id="checkAIML" value="AIML"><label class="form-check-label" for="checkAIML">AI/ML</label></div></div>
                                                    <div class="col"><div class="form-check"><input type="checkbox" class="form-check-input category-checkbox" id="checkTesting" value="Testing"><label class="form-check-label" for="checkTesting">Testing</label></div></div>
                                                    <div class="col"><div class="form-check"><input type="checkbox" class="form-check-input category-checkbox" id="checkCloud" value="Cloud Engineer"><label class="form-check-label" for="checkCloud">Cloud</label></div></div>
                                                    <div class="col"><div class="form-check"><input type="checkbox" class="form-check-input category-checkbox" id="checkDevOps" value="DevOps"><label class="form-check-label" for="checkDevOps">DevOps</label></div></div>
                                                    <div class="col"><div class="form-check"><input type="checkbox" class="form-check-input category-checkbox" id="checkHR" value="HR"><label class="form-check-label" for="checkHR">HR</label></div></div>
                                                    <div class="col"><div class="form-check"><input type="checkbox" class="form-check-input category-checkbox" id="checkUncategorized" value="Uncategorized"><label class="form-check-label" for="checkUncategorized">Uncategorized</label></div></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <h5 class="mb-2"><i class="fas fa-percentage me-1"></i>By Match Percentage</h5>
                                            <select id="downloadPercentageThreshold" class="form-select">
                                                <option value="0">All Results</option>
                                                <option value="70">>= 70%</option>
                                                <option value="80">>= 80%</option>
                                                <option value="90">>= 90%</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-12 text-center mt-3">
                                        <button type="button" class="btn btn-success me-2" id="downloadCsvButton" style="display: none;">
                                            <i class="fas fa-file-csv me-1"></i>All CSV
                                        </button>
                                        <button type="button" class="btn btn-success me-2" id="downloadFilteredCsvButton" style="display: none;">
                                            <i class="fas fa-filter me-1"></i>Filtered CSV
                                        </button>
                                        <button type="button" class="btn btn-warning" id="shortlistButton" style="display: none;">
                                            <i class="fas fa-star me-1"></i>Shortlist
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </section>
                </div>

                <!-- Results & Insights Section -->
                <div class="col-lg-7">
                    <section id="results-section" class="card h-100">
                        <div class="card-body">
                            <h2><i class="fas fa-chart-line me-2"></i>Results & Insights</h2>

                            <!-- Category Filters -->
                            <div id="categoryFilters" class="mt-3">
                                <h3><i class="fas fa-filter me-2"></i>Filter Results</h3>
                                <div class="row g-2">
                                    <div class="col-12">
                                        <h4 class="mb-2">By Category</h4>
                                        <div class="btn-group d-flex flex-wrap gap-2" role="group">
                                            <button type="button" class="btn category-btn active" data-category="">All</button>
                                            <button type="button" class="btn category-btn" data-category="Frontend">Frontend</button>
                                            <button type="button" class="btn category-btn" data-category="Backend">Backend</button>
                                            <button type="button" class="btn category-btn" data-category="Full Stack">Full Stack</button>
                                            <button type="button" class="btn category-btn" data-category="Mobile">Mobile</button>
                                            <button type="button" class="btn category-btn" data-category="AIML">AI/ML</button>
                                            <button type="button" class="btn category-btn" data-category="Testing">Testing</button>
                                            <button type="button" class="btn category-btn" data-category="Cloud Engineer">Cloud</button>
                                            <button type="button" class="btn category-btn" data-category="DevOps">DevOps</button>
                                            <button type="button" class="btn category-btn" data-category="HR">HR</button>
                                            <button type="button" class="btn category-btn" data-category="Uncategorized">Uncategorized</button>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <h4 class="mb-2"><i class="fas fa-percentage me-1"></i>By Match Percentage</h4>
                                        <select id="percentageThreshold" class="form-select">
                                            <option value="0">All Results</option>
                                            <option value="70">>= 70%</option>
                                            <option value="80">>= 80%</option>
                                            <option value="90">>= 90%</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div id="loader" style="display: none;">
                                <div class="progress-container">
                                    <svg class="progress-ring">
                                        <circle class="progress-ring-circle" cx="60" cy="60" r="50"/>
                                        <circle class="progress-ring progress" cx="60" cy="60" r="50"/>
                                    </svg>
                                    <div class="progress-icon">
                                        <i class="fas fa-file-alt"></i>
                                    </div>
                                </div>
                                <p>Processing Resumes</p>
                                <p id="timeRemaining">Estimated time: <span>~5s</span></p>
                            </div>
                            <div id="results" class="results mb-4"></div>

                            <!-- Visualization -->
                            <div id="visualization" class="mt-3">
                                <h3><i class="fas fa-chart-pie me-2"></i>Category Distribution</h3>
                                <div class="row">
                                    <div class="col-md-6"><canvas id="pieChart"></canvas></div>
                                    <div class="col-md-6"><canvas id="barChart"></canvas></div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-light">
        <div class="container-fluid text-center">
            <p class="mb-2">© 2025 Resume Expert | AI-Powered Resume Analysis</p>
            <div>
                <a href="#home" class="text-light me-2">Home</a>
                <a href="#features" class="text-light me-2">Features</a>
                <a href="#contact" class="text-light">Contact</a>
            </div>
        </footer>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papa.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <svg class="defs-only">
        <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#3B82F6" />
          <stop offset="100%" stop-color="#2DD4BF" />
        </linearGradient>
    </svg>
</body>
</html>